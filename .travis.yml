language: perl
perl:
   - 5.19

before_install:
    - sudo apt-get update
    - sudo apt-get install -y build-essential python-dev python-pip libxml2-dev libxslt1-dev cython
    - sudo pip install cython stix
    - cpanm Module::Install
    - git clone --depth=50 --branch=master git://github.com/csirtgadgets/p5-cif-sdk.git csirtgadgets/p5-cif-sdk
    - cd csirtgadgets/p5-cif-sdk
    - perl Makefile.PL && make
    - cpanm --installdeps --notest .
    - make install

notifications:
    email:
        on_success: never
        on_failure: always
branches:
    only:
        - master
        - /^release-.*$/
